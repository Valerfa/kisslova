(()=>{"use strict";let e="cc";"undefined"!=typeof window&&(e=window.location.origin.split(".").pop(),"string"==typeof e&&2===e.length||(e="cc"));const t=[`https://tilda.${e}/front/plugins/sortable-lite/t-sortable-lite.min.js`,`https://tilda.${e}/front/plugins/sortable-lite/t-sortable-lite.min.css`],n={container:"tcolors",containerThemeDark:"tcolors_dark",input:"tcolors__input",swatch:"tcolors__swatch",panel:"tcolors-panel",panelThemeDark:"tcolors-panel_dark",gradient:"tcolors-gradient",clearBtn:"tcolors__clear-btn"},i={theme:"pe-tooltip_noir",contentAsHTML:!0,interactive:!1,minWidth:50,maxWidth:300,position:"top",delay:700},o={selector:`.${n.panel}__swatch`,handleSelector:`.${n.panel}__swatch`,autoScroll:{speedIndex:.4},isAutoUpdateEnabled:!0,dragImage:{zIndex:99999}},r={"document-color":"document_colors",swatches:"saved_colors",tilda:"tilda_colors","tilda-gradients":"tilda_gradients"},s="https://front.tildacdn.com/colors/colors/colors.json",l=2592e5,a=24,c=["blue","aqua","mintgreen","green","lightgreen","yellow","peach","orange","pink","red","purple","violet","darkgray","lightgray","grayshades"];var d=function(e,t,n,i){var o;t[0]=0;for(var r=1;r<t.length;r++){var s=t[r++],l=t[r]?(t[0]|=s?1:2,n[t[r++]]):t[++r];3===s?i[0]=l:4===s?i[1]=Object.assign(i[1]||{},l):5===s?(i[1]=i[1]||{})[t[++r]]=l:6===s?i[1][t[++r]]+=l+"":s?(o=e.apply(l,d(e,l,n,["",null])),i.push(o),l[0]?t[0]|=2:(t[r-2]=0,t[r]=o)):i.push(l)}return i},h=new Map;const p={EN:{solid:"Solid",linear:"Linear",radial:"Radial",document_colors:"Colors on page",saved_colors:"Saved colors",tilda_colors:"Colors library",tilda_gradients:"Gradients library",save_color:"Save color",pick_color:"Pick color from screen",apply:"Apply",clear:"Clear",contrast_ratio:"Contrast",contrast_hint:"The contrast ratio gauges the level of accessibility of your website for individuals with visual impairments. A satisfactory contrast ratio is determined by the colors used for the foreground and background, as well as the size and weight of the font.",angle:"Angle",copied:"Copied",loading:"Loading...",load_error:"Load error",close:"Close panel"},RU:{solid:"Сплошной цвет",linear:"Линейный градиент",radial:"Радиальный градиент",document_colors:"Цвета на странице",saved_colors:"Сохранённые цвета",tilda_colors:"Библиотека цветов",tilda_gradients:"Библиотека градиентов",save_color:"Сохранить цвет",pick_color:"Выбрать цвет с экрана",apply:"Применить",clear:"Очистить",contrast_ratio:"Контраст",contrast_hint:"Коэффициент цветового контраста позволяет оценить доступность вашего сайта для людей с нарушением зрения. Он зависит от цвета текста и фона, а также от размера и насыщенности текста.",angle:"Угол",copied:"Скопировано",loading:"Загрузка...",load_error:"Ошибка загрузки",close:"Закрыть панель"}};const u=function(e){var t=h.get(this);return t||(t=new Map,h.set(this,t)),(t=d(this,t.get(e)||(t.set(e,t=function(e){for(var t,n,i=1,o="",r="",s=[0],l=function(e){1===i&&(e||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(0,e,o):3===i&&(e||o)?(s.push(3,e,o),i=2):2===i&&"..."===o&&e?s.push(4,e,0):2===i&&o&&!e?s.push(5,0,!0,o):i>=5&&((o||!e&&5===i)&&(s.push(i,0,o,n),i=6),e&&(s.push(i,e,0,n),i=6)),o=""},a=0;a<e.length;a++){a&&(1===i&&l(),l(a));for(var c=0;c<e[a].length;c++)t=e[a][c],1===i?"<"===t?(l(),s=[s],i=3):o+=t:4===i?"--"===o&&">"===t?(i=1,o=""):o=t+o[0]:r?t===r?r="":o+=t:'"'===t||"'"===t?r=t:">"===t?(l(),i=1):i&&("="===t?(i=5,n=o,o=""):"/"===t&&(i<5||">"===e[a][c+1])?(l(),3===i&&(s=s[0]),i=s,(s=s[0]).push(2,0,i),i=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(l(),i=2):o+=t),3===i&&"!--"===o&&(i=4,s=s[0])}return l(),s}(e)),t),arguments,[])).length>1?t:t[0]}.bind((function(e,t){this[0]=3;for(var n=arguments.length,o=new Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];if("function"==typeof e){const n=new e(t).render();return n.append(...o.flat()),n}if("string"==typeof e){const n=["svg","circle"].includes(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t&&Object.entries(t).forEach((e=>{let[t,o]=e;if(t.startsWith("on"))Array.isArray(o)?o.forEach((e=>n.addEventListener(t.substring(2).toLowerCase(),e))):n.addEventListener(t.substring(2).toLowerCase(),o);else if("className"===t)n.classList.add(...o.split(" "));else if("tooltip"===t)!function(e,t){if("function"!=typeof window.tooltipster||window.matchMedia("(hover: none)").matches)return;window.tooltipster([e],{...i,content:t})}(n,o);else if("bindTo"===t){if(Array.isArray(o)){const[e,t]=o;e&&"object"==typeof e&&"string"==typeof t&&(e[t]=n)}}else["string","number"].includes(typeof o)?n.setAttribute(t,o):"boolean"==typeof o&&o&&n.setAttribute(t,"")})),n.append(...o.flat()),n}if(e instanceof Element)return e}));function g(){const e=[];return{on:t=>{e.push(t)},trigger:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.forEach((e=>e(...n)))}}}function m(e){const t=(Array.isArray(e)?e:[e]).map((e=>{const t=e.split(".").pop(),n=e+(window.ver?"?v="+window.ver:"");return["js","css"].includes(t)?function(e,t){return new Promise(((n,i)=>{const o="style"===t,r=o?"link":"script",s=o?"href":"src";let l;try{const{pathname:t}=new URL(e,window.location.href);l=t}catch(t){l=e}const a=document.querySelector(`${r}[${s}*="${l}"]`);if(a)return"true"===a.getAttribute("data-loading")?(a.addEventListener("load",n),void a.addEventListener("error",i)):n();const c=document.createElement(r);c.setAttribute(s,e),o&&c.setAttribute("rel","stylesheet"),c.setAttribute("data-loading","true"),c.addEventListener("load",(()=>(c.removeAttribute("data-loading"),n()))),c.addEventListener("error",(()=>(document.head.removeChild(c),i()))),document.head.appendChild(c)}))}(n,"js"===t?"script":"style"):Promise.reject("Unknown resource extension. Make sure the resource url ends with .css or .js")}));return Promise.all(t)}function y(e,t,n){return(n||p)[t][e]||(n||p).EN[e]||e}function f(e,t){let n=null;return function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];n||(n=window.setTimeout((()=>{e.apply(null,o),window.clearTimeout(n),n=null}),t))}}function v(e,t){let n=null;return function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];window.clearTimeout(n),n=window.setTimeout((()=>{e.apply(null,o)}),t)}}function $(e,t){if(!e)return[0,0,0];const n=(n=>{if(!t){const t=function(e){if(e.toLowerCase().includes("gradient"))return null;const t="#010101";if(D.fillStyle=t,D.fillStyle=e,D.fillStyle!==t)return D.fillStyle;return null}(n);t&&(n=t,e=t)}return n.startsWith("rgba")?"rgba":n.startsWith("rgb")?"rgb":n.startsWith("hsl")?"hsl":"hex"})(e=String(e).toLowerCase());return"rgb"===n?(e=>{let t=e.replace(/[^0-9,.]/g,"").split(",");return t.splice(3,t.length),t.length?(t=t.map((e=>{const t=parseFloat(e)||0;return t>255?255:t})),1===t.length&&t.push(0,0),2===t.length&&t.push(0),P(t)):[0,0,0]})(e):"rgba"===n?(e=>{let t=e.replace(/[^0-9,.]/g,"").split(",");return t.splice(4,t.length),t.length?(1===t.length&&t.push(0,0,1),2===t.length&&t.push(0,1),3===t.length&&t.push(1),t=t.map(((e,t)=>{if(3===t){let t=parseFloat(e);return t=I(t)?t:1,t=t>1?1:t<0?0:t,t}{let t=parseInt(e,10)||0;return t=t>255?255:t<0?0:t,t}})),t[3]=parseFloat(t[3].toFixed(2)),[...P([t[0],t[1],t[2]]),t[3]]):[0,0,0,1]})(e):"hsl"===n?(e=>{let t=e.replace(/[^0-9,.]/g,"").split(",");return t.splice(3,t.length),t.length?(t=t.map(((e,t)=>{const n=parseFloat(e)||0;return t?n>100?1:n/100:n>360?1:n/360})),1===t.length&&t.push(0,0),2===t.length&&t.push(0),t):[0,0,0]})(e):"hex"===n?(e=>{let t=e.replace(/[^0-9a-fA-F]/g,"").substring(0,6).toLowerCase();return t.length?6===t.length?_(t):(t.length>3&&(t=t.substring(0,3)),t.length<3?(t=t.padEnd(6,t),_(t)):_(t[0]+t[0]+t[1]+t[1]+t[2]+t[2])):_("000000")})(e):[0,0,0]}function b(e,t){if(!e)return!1;return(e=String(e).toLowerCase().replace(/\s{2,}/g,"").replace(/^\s/,"").replace(/\s$/,"")).startsWith("linear-gradient")?(e=>{let n=e.match(/^linear-gradient\((.+)\)$/);if(!n)return!1;if(n=n[1],!n)return!1;const i=n.split(/,(?![^(]*\))/);if(i.length<2)return!1;let o,r=i[0];if(r.includes("deg")||r.includes("turn")||r.includes("rad")){const e=r.includes("deg")?"deg":r.includes("turn")?"turn":"rad";r=r.replace(/\s/g,"").replace(/[a-z]/g,""),r=parseFloat(r),r=I(r)?r:0,"deg"===e&&(r/=360),"rad"===e&&(r/=2*Math.PI),r=r>=0&&r<=1?r:1,o=i.splice(1)}else r=0,o=i;let s=!1;return o.splice(15),o=o.map(((e,n)=>{const i=(e=e.replace(/^\s/,"").replace(/\s$/,"")).split(/\s(?![^(]*\))/);if(i.length>2)return void(s=!0);const r=$(i[0],t);let l,a=1;return 4===r.length&&(a=r[3],r.splice(3)),i[1]?(l=i[1].replace(/[^0-9.]/g,""),l=parseFloat(l),l=I(l)&&l>=0&&l<=100?l:0,l/=100):l=n/(o.length-1),{color:r,position:l,opacity:a}})),!s&&(r=parseFloat(r.toFixed(3)),{type:"linear",stops:o,angle:r})})(e):!!e.startsWith("radial-gradient")&&(e=>{const n=e.match(/^radial-gradient\((.+)\)$/)[1];if(!n)return!1;const i=n.split(/,(?![^(]*\))/);if(i.length<2)return!1;let o;o=i[0].includes("circle")||i[0].includes("ellipse")||i[0].includes("side")||i[0].includes("corner")?i.splice(1):i;let r=!1;return o.splice(15),o=o.map(((e,n)=>{const i=(e=e.replace(/^\s/,"").replace(/\s$/,"")).split(/\s(?![^(]*\))/);if(i.length>2)return void(r=!0);const s=$(i[0],t);let l,a=1;return 4===s.length&&(a=s[3],s.splice(3)),i[1]?(l=i[1].replace(/[^0-9.]/g,""),l=parseFloat(l),l=I(l)&&l>=0&&l<=100?l:0,l/=100):l=n/(o.length-1),{color:s,position:l,opacity:a}})),!r&&{type:"radial",stops:o,angle:0}})(e)}function w(e){e=e.replace(/#/g,"");return[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16)]}function _(e){return P(w(e))}function T(e){let[t,n,i]=e;t*=360;const o=(1-Math.abs(2*i-1))*n,r=t/60,s=o*(1-Math.abs(r%2-1));let l;l=r>=0&&r<1?[o,s,0]:r>=1&&r<2?[s,o,0]:r>=2&&r<3?[0,o,s]:r>=3&&r<4?[0,s,o]:r>=4&&r<5?[s,0,o]:[o,0,s];const a=i-o/2,[c,d,h]=l;let[p,u,g]=[c+a,d+a,h+a];return p=Math.round(255*p),u=Math.round(255*u),g=Math.round(255*g),[p,u,g]}function C(e){const t=T(e);let n=I(e[3])&&e[3]>=0&&e[3]<=1?e[3]:1;return n=parseFloat(n.toFixed(2)),[...t,n]}function E(e){return e.map((e=>{const t=Number(e).toString(16);return 1===t.length?"0"+t:t})).join("")}function k(e){return E(T(e))}function P(e){let[t,n,i]=e;t/=255,n/=255,i/=255;const o=Math.max(t,n,i),r=Math.min(t,n,i),s=o-r;let l,a,c=(o+r)/2;return 0===s?l=0:o===t?l=(n-i)/s%6*60:o===n?l=60*((i-t)/s+2):o===i&&(l=60*((t-n)/s+4)),a=0===c||1===c?0:(o-c)/Math.min(c,1-c),l/=360,l<0&&(l+=1),l=parseFloat(l.toFixed(4)),a=parseFloat(a.toFixed(4)),c=parseFloat(c.toFixed(4)),[l,a,c]}function S(e){let[t,n,i]=e,o=i*(1-n/2),r=0===o||1===o?0:(i-o)/Math.min(o,1-o);return t=parseFloat(t.toFixed(4)),r=parseFloat(r.toFixed(4)),o=parseFloat(o.toFixed(4)),[t,r,o]}function L(e){let[t,n,i]=e,o=i+n*Math.min(i,1-i),r=0===o?0:2*(1-i/o);return t=parseFloat(t.toFixed(4)),r=parseFloat(r.toFixed(4)),o=parseFloat(o.toFixed(4)),[t,r,o]}const D=document.createElement("canvas").getContext("2d");function M(e){const[t,n,i]=T(e).map((e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)));return.2126*t+.7152*n+.0722*i}function x(e,t){const n=T(e),i=I(t)&&t>=0&&t<=1?t:1;return`rgba(${n.join(",")},${i})`}function O(e,t){if(!e)return"";const n=t?"linear":e.type,i=e.stops.map((e=>`${x(e.color,e.opacity)} ${Math.round(100*e.position)}%`)).join(",");return"linear"===n?`linear-gradient(${t?.25:e.angle}turn,${i})`:"radial"===n?`radial-gradient(circle at center,${i})`:void 0}function U(e,t,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(I(n)&&1!==n&&!t&&(t=[0,0,0]),e.gradient&&Array.isArray(e.gradient.stops)&&e.gradient.stops.length&&i){const i=e.gradient.stops.find((e=>{let{active:t}=e;return t}))||e.gradient.stops[0];i.color=t?[...t]:[0,0,0],i.opacity=n}else e.gradient=null;e.color=t,e.opacity=n}function N(e,t,n,i){const o=t&&!n,r=window.getComputedStyle(e),s=[],l=r.getPropertyValue("opacity"),a=r.getPropertyValue("display"),c=r.getPropertyValue("visibility");if("0"===l||"none"===a||"hidden"===c)return s;const d=r.getPropertyValue("background-color"),h=r.getPropertyValue("color"),p=r.getPropertyValue("background-image"),u=r.getPropertyValue("border-color"),g=r.getPropertyValue("border-style"),m=r.getPropertyValue("box-shadow").replace(/\).*/,")");if("none"!==d&&"rgba(0, 0, 0, 0)"!==d){const e=C($(d,!0)),t=e[3];(o||1===t)&&s.push("rgba("+e.join(",")+")")}if("none"!==p&&!p.startsWith("url")){const e=b(p,!0),t=e&&Array.isArray(e.stops)&&e.stops.some((e=>e.opacity&&1!==e.opacity));if(e&&i&&(t&&o||!t)){const t=O(e);s.push(t)}}if("none"!==h&&"rgba(0, 0, 0, 0)"!==h&&e.childNodes.length){const e=C($(h,!0)),t=e[3];(o||1===t)&&s.push("rgba("+e.join(",")+")")}if("none"!==u&&"rgba(0, 0, 0, 0)"!==u&&"none"!==g){const e=C($(u,!0)),t=e[3];(o||1===t)&&s.push("rgba("+e.join(",")+")")}if("none"!==m&&"rgba(0, 0, 0, 0)"!==m){const e=C($(m,!0)),t=e[3];(o||1===t)&&s.push("rgba("+e.join(",")+")")}return s}function V(e,t){const{endX:n,endY:i}=e,o=t.scrollLeft,r=t.scrollTop;let s;const l=e=>{void 0===s&&(s=performance.now());const a=(c=(e-s)/300)<.5?4*c*c*c:1-Math.pow(-2*c+2,3)/2;var c;t.scrollLeft=o+a*(n-o),t.scrollTop=r+a*(i-r),a<1?requestAnimationFrame(l):(t.scrollLeft=n,t.scrollTop=i)};requestAnimationFrame(l)}function W(e,t){if(e.includes("gradient")){const n=b(e,!0),i=n.stops[0]?n.stops[0].color:null,o=n.stops[0]?n.stops[0].opacity:null,r=n.stops[n.stops.length-1]?n.stops[n.stops.length-1].color:null,s=n.stops[n.stops.length-1]?n.stops[n.stops.length-1].opacity:null,l=n.type;if(!(i&&I(o)&&r&&I(s)&&l))return"";const a="#"+k(i).toUpperCase(),c="#"+k(r).toUpperCase(),d=1===o?"":Math.floor(100*o)+"% ",h=1===s?"":Math.floor(100*s)+"% ";return(y(l,t)+"<br>"+a+" "+d+"→ "+(n.stops.length>2?"... → ":"")+c+" "+h).trim()}const n=$(e,!0),i=I(n[3])?n[3]:1;return"#"+k(n).toUpperCase()+(1===i?"":" "+Math.floor(100*i)+"%")}function A(e,t,n){return Math.max(e,Math.min(t,n))}function I(e){return"number"==typeof e&&!isNaN(e)}function G(e,t){if("string"!=typeof e&&!I(e))return[t,t,t,t];const n=I(e)?[e]:e.trim().replace(/\s{2,}/g," ").split(" ").map((e=>{const n=parseInt(e,10);return I(n)?n:t}));return n.splice(4),n.length?1===n.length?[n[0],n[0],n[0],n[0]]:2===n.length?[n[0],n[1],n[0],n[1]]:3===n.length?[n[0],n[1],n[2],n[1]]:n:[t,t,t,t]}function F(e){const t=e=>{if(!e)return!1;const t=window.getComputedStyle(e),n=["auto","scroll"].includes(t.overflowX),i=["auto","scroll"].includes(t.overflowX),{offsetHeight:o,scrollHeight:r,offsetWidth:s,scrollWidth:l}=e;return l>s&&n||r>o&&i};e.addEventListener("wheel",(n=>{const{deltaX:i,deltaY:o,target:r}=n,s=(n=>{let i=n;for(;!t(i)&&(i=i.parentElement,i!==e&&i!==document.documentElement););return i})(r);let l;var a;l=Math.abs(i)>Math.abs(o)?"horizontal":Math.abs(i)<Math.abs(o)?"vertical":"both",(["vertical","both"].includes(l)&&((a=s)&&0===a.scrollTop&&o<0||(e=>e&&Math.ceil(e.scrollTop+e.clientHeight)>=e.scrollHeight)(s)&&o>0)||["horizontal","both"].includes(l)&&((e=>e&&0===e.scrollLeft)(s)&&i<0||(e=>e&&Math.ceil(e.scrollLeft+e.clientWidth)>=e.scrollWidth)(s)&&i>0))&&n.preventDefault()}),{passive:!1})}function B(e,t){const n=["left","right","top","bottom"];return Array.isArray(e)?(e=e.filter((e=>n.includes(e))),(e=[...new Set(e)]).length?(e.splice(4),e):t):n.includes(e)?[e]:t}function j(e,t){const n=function(e,t){const n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+i*i+o*o)}(e,t);return(1-n/Math.sqrt(3)).toFixed(2)}function R(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function z(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var K=new WeakSet,H=new WeakSet,X=new WeakSet,q=new WeakSet,Y=new WeakSet;class J{constructor(e){R(this,Y),R(this,q),R(this,X),R(this,H),R(this,K),this.props=e,this.elements={},this.props.colorUpdateTrigger.on(z(this,Y,ne).bind(this)),this.props.colorModeUpdateTrigger.on(z(this,Y,ne).bind(this)),this.props.panelToggleTrigger.on(z(this,q,te).bind(this)),this.handlePointerMove=this.handlePointerMove.bind(this),this.handlePointerUp=this.handlePointerUp.bind(this)}render(){const e=u`
			<div className=${`${n.panel}__area`} onPointerDown=${z(this,K,Z).bind(this)}>
				<div className=${`${n.panel}__area-inner`}></div>
				<div
					className=${`${n.panel}__area-picker`}
					style="display:none;"
					tabindex="0"
					onKeyDown=${z(this,X,ee).bind(this)}
					bindTo=${[this.elements,"picker"]}
				></div>
			</div>
		`;this.elements.container=e,setTimeout(z(this,Y,ne).bind(this),0);const{bindTo:t}=this.props;if(t){const[n,i]=t;n[i]=e}return e}handlePointerMove(e){const{clientX:t,clientY:n}=e;z(this,H,Q).call(this,t,n)}handlePointerUp(){document.removeEventListener("pointermove",this.handlePointerMove),document.removeEventListener("pointerup",this.handlePointerUp),document.documentElement.style.removeProperty("user-select"),document.documentElement.style.removeProperty("-webkit-user-select")}}function Z(e){const{clientX:t,clientY:n}=e;z(this,H,Q).call(this,t,n),document.addEventListener("pointermove",this.handlePointerMove),document.addEventListener("pointerup",this.handlePointerUp),document.documentElement.style.userSelect="none",document.documentElement.style.webkitUserSelect="none"}function Q(e,t){const n=this.elements.container.getBoundingClientRect(),{mode:i}=this.props.colorMode,{left:o,top:r,width:s,height:l}=n,{color:a,opacity:c}=this.props.currentValues,d=r+l,h=A(0,(e-o)/(o+s-o),1),p=A(0,(t-r)/(d-r),1),u=a&&a[0]||0,g=h;if("hsl"===i||1===p){const e=1-p;U(this.props.currentValues,[u,g,e],c)}else{const e=1-p;U(this.props.currentValues,S([u,g,e]),c)}this.props.colorChangeTrigger.trigger()}function ee(e){const{key:t}=e;if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t))return;e.preventDefault();const n=e.shiftKey?.05:.01,{mode:i}=this.props.colorMode,{color:o,opacity:r}=this.props.currentValues;if(o){if("hsl"===i){let[e,i,s]=o;"ArrowUp"===t?(s+=n,s=s>1?1:s):"ArrowRight"===t?(i+=n,i=i>1?1:i):"ArrowDown"===t?(s-=n,s=s<0?0:s):"ArrowLeft"===t&&(i-=n,i=i<0?0:i),U(this.props.currentValues,[e,i,s],r)}else{let[e,i,s]=L(o);"ArrowUp"===t?(s+=n,s=s>1?1:s):"ArrowRight"===t?(i+=n,i=i>1?1:i):"ArrowDown"===t?(s-=n,s=s<0?0:s):"ArrowLeft"===t&&(i-=n,i=i<0?0:i),U(this.props.currentValues,S([e,i,s]),r)}this.props.colorChangeTrigger.trigger()}}function te(e){if(e)return z(this,Y,ne).call(this);document.removeEventListener("pointermove",this.handlePointerMove),document.removeEventListener("pointerup",this.handlePointerUp),document.documentElement.style.removeProperty("user-select"),document.documentElement.style.removeProperty("-webkit-user-select")}function ne(){const{mode:e}=this.props.colorMode,{container:t,picker:i}=this.elements,{color:o}=this.props.currentValues;if(t.classList.toggle(`${n.panel}__area_hsl`,"hsl"===e),!o)return t.style.setProperty("--current-hue","0turn"),i.style.removeProperty("transform"),void(i.style.display="none");i.style.removeProperty("display");const[r,s,l]=o,[,a,c]=L(o);t.style.setProperty("--current-hue",`${r}turn`);const{width:d,height:h}=t.getBoundingClientRect(),p="hsl"===e||0===c&&0!==s?d*s:d*a,u="hsl"===e?h*(1-l):h*(1-c);i.style.transform=`translate(${p}px,${u}px)`}class ie{constructor(e){this.props=e}render(){const{className:e,hintText:t,label:i,bindTo:o}=this.props;let r=`${n.panel}__hint`;if(e&&(r+=` ${e}`),this.element=u`
			<div className=${r} tooltip=${t}>${i}</div>
		`,o){const[e,t]=o;e[t]=this.element}return this.element}}function oe(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function re(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var se=new WeakSet,le=new WeakSet;class ae{constructor(e){oe(this,le),oe(this,se),this.props=e,this.elements={},this.props.panelToggleTrigger.on(re(this,le,de).bind(this)),this.props.colorUpdateTrigger.on(re(this,se,ce).bind(this))}render(){const{lang:e}=this.props,t=u`
			<div className=${`${n.panel}__contrast`} style="display:none;">
				<div className=${`${n.panel}__contrast-label`}>${y("contrast_ratio",e)}</div>
				<${ie}
					className=${`${n.panel}__hint_contrast`}
					hintText=${y("contrast_hint",e)}
					label="?"
				/>
				<div className=${`${n.panel}__contrast-rate`} bindTo=${[this.elements,"rateElement"]}></div>
				<div className=${`${n.panel}__contrast-value`} bindTo=${[this.elements,"valueElement"]}></div>
			</div>
		`;return this.elements.container=t,t}}function ce(){const{color:e,gradient:t}=this.props.currentValues,{bgColor:i,isLargeTxt:o}=this,r=t||!e||!i,{container:s,rateElement:l,valueElement:a}=this.elements;if(r)return void(s.style.display="none");s.style.removeProperty("display");const c=function(e,t){const n=M(e),i=M(t),o=(Math.max(n,i)+.05)/(Math.min(n,i)+.05);return parseFloat(o.toFixed(2))}(e,i);let d="Fail";o&&c>=4.5||c>=7?d="AAA":(o&&c>=3||c>=4.5)&&(d="AA"),l.innerText=d,a.innerText=c,l.classList.toggle(`${n.panel}__contrast-rate_fail`,"Fail"===d)}function de(e){if(e){const e=function(e){let t=e.name;if(!["text_color","title_color","descr_color","subtitle_color"].includes(t))return null;t=t.replace("_color","");const n=e.closest("[data-rec-id]");if(!n)return null;const i=n.getAttribute("data-rec-id");return document.querySelector(`#rec${i} [field="${t}"]`)||null}(this.props.input);this.bgColor=function(e){if(!e)return null;let t=e,n=null;for(;t;){const e=window.getComputedStyle(t),i=e.getPropertyValue("background-color"),o=e.getPropertyValue("background-image");if("rgba(0, 0, 0, 0)"!==i&&"none"===o){n=$(i,!0);break}if("none"!==o)break;t=t.parentElement}return n}(e),this.isLargeTxt=function(e){if(!e)return!1;const t=window.getComputedStyle(e),n=t.getPropertyValue("font-size").replace(/[^0-9]/g,""),i=t.getPropertyValue("font-weight");return n>=24||n>=18.66&&i>=700}(e),re(this,se,ce).call(this)}}function he(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function pe(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var ue=new WeakSet,ge=new WeakSet,me=new WeakSet,ye=new WeakSet;class fe{constructor(e){he(this,ye),he(this,me),he(this,ge),he(this,ue),this.props=e,this.props.colorUpdateTrigger.on(pe(this,me,be).bind(this))}render(){const{className:e,controls:t,isOpacityEnabled:i,isGradientOpacityOnly:o,clearBtn:r}=this.props,{gradient:s}=this.props.currentValues;let l=`${n.panel}__input`;e&&(l+=` ${e}`),r&&(l+=` ${n.panel}__input_clear`);let a="0";"opacity"===t&&(a="100"),"hex"===t&&(a="#000000");const c=i&&(o&&s||!o);return this.element=u`
			<input
				type=${r?"search":"text"}
				className=${l}
				maxlength=${"hex"===t?7:3}
				value=${pe(this,ue,ve).call(this)}
				placeholder=${a}
				onInput=${pe(this,ge,$e).bind(this)}
				onKeydown=${pe(this,ye,we).bind(this)}
				onBlur=${pe(this,me,be).bind(this)}
				style=${"opacity"!==t||c?void 0:"display:none;"}
			/>
		`,this.element}}function ve(){const{controls:e,currentValues:t}=this.props,{opacity:n,color:i,gradient:o}=t;return i?"opacity"===e?I(n)?Math.round(100*n):"":"angle"===e?o&&I(o.angle)?Math.round(360*o.angle):"":"hex"===e?`#${k(i).toUpperCase()}`:"hue"===e?Math.round(360*i[0]):"saturation"===e?Math.round(100*i[1]):"luma"===e?Math.round(100*i[2]):"red"===e?T(i)[0]:"green"===e?T(i)[1]:"blue"===e?T(i)[2]:"":""}function $e(){const{controls:e,currentValues:t,colorChangeTrigger:n}=this.props,{color:i,gradient:o}=t,{value:r}=this.element;if("opacity"===e){const e=parseInt(r,10);t.opacity=I(e)?A(0,e/100,1):null}if("angle"===e){const e=parseInt(r,10);if(!o)return;o.angle=I(e)?parseFloat(A(0,e/360,1).toFixed(3)):0}if("hex"===e){const e=r.replace(/[^0-9A-Za-z]/g,""),n=$(r);4===n.length&&n.pop(),t.color=e&&r?n:null}if("hue"===e){const e=i||[0,0,0],n=parseInt(r,10);e[0]=I(n)?parseFloat(A(0,n/360,1).toFixed(3)):0,t.color=e}if("saturation"===e){const e=i||[0,0,0],n=parseInt(r,10);e[1]=I(n)?A(0,n/100,1):0,t.color=e}if("luma"===e){const e=i||[0,0,0],n=parseInt(r,10);e[2]=I(n)?A(0,n/100,1):0,t.color=e}if("red"===e){const e=T(i||[0,0,0]),n=parseInt(r,10);e[0]=I(n)?A(0,n,255):0,t.color=P(e)}if("green"===e){const e=T(i||[0,0,0]),n=parseInt(r,10);e[1]=I(n)?A(0,n,255):0,t.color=P(e)}if("blue"===e){const e=T(i||[0,0,0]),n=parseInt(r,10);e[2]=I(n)?A(0,n,255):0,t.color=P(e)}U(t,t.color,t.opacity),n.trigger()}function be(e){const{controls:t,isGradientOpacityOnly:n,currentValues:i,colorChangeTrigger:o,isOpacityEnabled:r}=this.props;if("opacity"===t&&!r)return;const s=e&&e.forceUpdate;document.activeElement===this.element&&!s||(this.element.value=pe(this,ue,ve).call(this),"opacity"===t&&n&&!i.gradient?(this.element.style.display="none",I(i.opacity)&&(i.opacity=null,o.trigger())):"opacity"===t&&this.element.style.removeProperty("display"))}function we(e){const{key:t}=e,{controls:n,currentValues:i,colorChangeTrigger:o}=this.props,{color:r,opacity:s,gradient:l}=i;if("Enter"===t&&e.preventDefault(),["ArrowUp","ArrowDown"].includes(t)){if("hex"===n)return;e.preventDefault();const a="ArrowUp"===t?1:-1;if("opacity"===n){const e=I(s)?s:1;i.opacity=A(0,e+.01*a,1)}if("angle"===n){if(!l)return;const e=l.angle||0;l.angle=parseFloat(A(0,e+1/360*a,1).toFixed(3))}if("hue"===n){const e=r||[0,0,0];e[0]=parseFloat(A(0,e[0]+1/360*a,1).toFixed(3)),i.color=e}if("saturation"===n){const e=r||[0,0,0];e[1]=A(0,e[1]+.01*a,1),i.color=e}if("luma"===n){const e=r||[0,0,0];e[2]=A(0,e[2]+.01*a,1),i.color=e}if("red"===n){const e=T(r||[0,0,0]);e[0]=A(0,e[0]+1*a,255),i.color=P(e)}if("green"===n){const e=T(r||[0,0,0]);e[1]=A(0,e[1]+1*a,255),i.color=P(e)}if("blue"===n){const e=T(r||[0,0,0]);e[2]=A(0,e[2]+1*a,255),i.color=P(e)}U(i,i.color,i.opacity),o.trigger({forceUpdate:!0})}}function _e(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Te(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var Ce=new WeakSet,Ee=new WeakSet,ke=new WeakSet,Pe=new WeakSet,Se=new WeakSet,Le=new WeakSet,De=new WeakSet;class Me{constructor(e){_e(this,De),_e(this,Le),_e(this,Se),_e(this,Pe),_e(this,ke),_e(this,Ee),_e(this,Ce),this.props=e,this.elements={},this.props.colorUpdateTrigger.on(Te(this,Ee,Oe).bind(this)),this.props.panelToggleTrigger.on(Te(this,De,Ae).bind(this)),this.handleDocumentPointerMoveMarker=this.handleDocumentPointerMoveMarker.bind(this),this.handleDocumentPointerMoveAngle=this.handleDocumentPointerMoveAngle.bind(this),this.handleDocumentPointerUp=this.handleDocumentPointerUp.bind(this)}render(){const{currentValues:e,colorChangeTrigger:t,colorUpdateTrigger:i,lang:o}=this.props,{gradient:r}=e,s=O(r,!0),l=r&&r.angle||0,a=u`
			<div className=${`${n.panel}__gradients`} style=${r?void 0:"display:none"}>
				<div className=${`${n.panel}__gradient-wrapper`}>
					<div
						className=${`${n.gradient}${r&&r.stops.length>=15?` ${n.gradient}_disabled`:""}`}
						style=${`--current-gradient:${s};`}
						onClick=${Te(this,Le,We).bind(this)}
						bindTo=${[this.elements,"gradientLine"]}
					>
						${Te(this,Ce,xe).call(this)}
					</div>
					<div
						className=${`${n.panel}__angle`}
						style=${r&&"linear"!==r.type?"display:none;":void 0}
						bindTo=${[this.elements,"angleContainer"]}
					>
						<label className=${`${n.panel}__angle-label`}>
							<span className=${`${n.panel}__angle-span`}>${y("angle",o)}</span>
							<${fe}
								className=${`${n.panel}__angle-input`}
								controls="angle"
								currentValues=${e}
								colorChangeTrigger=${t}
								colorUpdateTrigger=${i}
							/>
						</label>
						<div
							className=${`${n.panel}__angle-picker`}
							style=${`--angle:${l}turn;`}
							onPointerdown=${Te(this,ke,Ue).bind(this)}
							onClick=${this.handleDocumentPointerMoveAngle}
							bindTo=${[this.elements,"anglePicker"]}
						></div>
					</div>
				</div>
			</div>
		`;return this.elements.container=a,a}handleDocumentPointerMoveMarker(e){const{gradient:t}=this.props.currentValues;if(!t||!t.stops.length)return;const{clientX:n,shiftKey:i}=e;if(this.pointerDownStartPos&&Math.abs(this.pointerDownStartPos-n)<5)return;this.pointerDownStartPos=null;const{gradientLine:o}=this.elements,{left:r,width:s}=o.getBoundingClientRect();let l=A(0,(n-r)/(r+s-r),1);l=parseFloat(l.toFixed(i?1:3));const{stops:a}=t,c=a.find((e=>{let{active:t}=e;return t}))||a[0];if(!i){const e=a.indexOf(c),t=e>0?a[e-1]:null,n=e<a.length-1?a[e+1]:null,i=.03;t&&Math.abs(l-t.position)<i?l=t.position:n&&Math.abs(l-n.position)<i&&(l=n.position)}c.position=l,a.sort(((e,t)=>e.position-t.position)),this.props.colorChangeTrigger.trigger()}handleDocumentPointerMoveAngle(e){const{gradient:t}=this.props.currentValues;if(!t)return;const{clientX:n,clientY:i,shiftKey:o}=e,{anglePicker:r}=this.elements,{left:s,top:l,width:a,height:c}=r.getBoundingClientRect(),d=n-(s+a/2),h=-1*(i-(l+c/2));let p=180*Math.atan(d/h)/Math.PI;if(h<0?p+=180:d<0&&(p+=360),o){const e=15;p=Math.round(p/e)*e}p=A(0,p/360,1),p=parseFloat(p.toFixed(3)),t.angle=p,this.props.colorChangeTrigger.trigger()}handleDocumentPointerUp(){document.removeEventListener("pointermove",this.handleDocumentPointerMoveMarker),document.removeEventListener("pointermove",this.handleDocumentPointerMoveAngle),document.removeEventListener("pointerup",this.handleDocumentPointerUp),document.documentElement.style.removeProperty("user-select"),document.documentElement.style.removeProperty("-webkit-user-select");const{gradientLine:e}=this.elements,t=e.querySelector(`.${n.gradient}__marker_selected`);t&&t.focus()}}function xe(){const{gradient:e}=this.props.currentValues;if(!e||!e.stops.length)return"";return e.stops.find((e=>{let{active:t}=e;return t}))||(e.stops[0].active=!0),e.stops.map(((e,t)=>{let{color:i,position:o,opacity:r,active:s}=e;const l=C([...i,r]);return u`
				<div
					className=${`${n.gradient}__marker${s?` ${n.gradient}__marker_selected`:""}`}
					style=${`left:${100*o}%;--marker-color:rgba(${l.join(",")});`}
					onPointerdown=${Te(this,Pe,Ne).bind(this)}
					onKeyDown=${Te(this,Se,Ve).bind(this)}
					tabindex=${s?0:void 0}
					data-index=${t}
				>
					<div className=${`${n.gradient}__marker-inner`}></div>
				</div>
			`}))}function Oe(){const{gradientLine:e,anglePicker:t,container:i,angleContainer:o}=this.elements,{gradient:r}=this.props.currentValues;if(!r||!r.stops.length)return void(i.style.display="none");"linear"===r.type?o.style.removeProperty("display"):o.style.display="none",i.style.removeProperty("display");const s=r.angle||0;t.style.setProperty("--angle",`${s}turn`);const l=O(r,!0);e.style.setProperty("--current-gradient",l),e.innerHTML="",e.append(...Te(this,Ce,xe).call(this)),e.classList.toggle(`${n.gradient}_disabled`,r.stops.length>=15)}function Ue(){document.addEventListener("pointermove",this.handleDocumentPointerMoveAngle),document.addEventListener("pointerup",this.handleDocumentPointerUp),document.documentElement.style.userSelect="none",document.documentElement.style.webkitUserSelect="none"}function Ne(e){const t=e.target.closest(`.${n.gradient}__marker`),i=parseInt(t.dataset.index,10),{currentValues:o,colorUpdateTrigger:r}=this.props,{gradient:s}=o;if(i!==s.stops.findIndex((e=>{let{active:t}=e;return t}))){s.stops.forEach((e=>e.active=!1));const e=s.stops[i];e.active=!0,o.color=e.color,o.opacity=e.opacity,r.trigger()}this.pointerDownStartPos=e.clientX,document.addEventListener("pointermove",this.handleDocumentPointerMoveMarker),document.addEventListener("pointerup",this.handleDocumentPointerUp),document.documentElement.style.userSelect="none",document.documentElement.style.webkitUserSelect="none"}function Ve(e){const{key:t,shiftKey:i,target:o}=e,{currentValues:r,colorChangeTrigger:s,colorUpdateTrigger:l}=this.props,{gradientLine:a}=this.elements,{gradient:c}=r;if(!c||!c.stops.length)return;const{stops:d}=c,h=d.find((e=>{let{active:t}=e;return t}))||d[0];if(["ArrowLeft","ArrowRight"].includes(t)){const e="ArrowLeft"===t?-1:1,o=i?.05*e:.01*e,r=A(0,h.position+o,1);h.position=r,d.sort(((e,t)=>e.position-t.position)),s.trigger(),window.setTimeout((()=>{const e=a.querySelector(`.${n.gradient}__marker_selected`);e&&e.focus()}),0)}if("Backspace"===t&&d.length>2){const e=d.indexOf(h),t=e>0?d[e-1]:null,i=e<d.length-1?d[e+1]:null;d.splice(e,1),t?(t.active=!0,r.color=t.color,r.opacity=t.opacity):i&&(i.active=!0,r.color=i.color,r.opacity=i.opacity),s.trigger(),window.setTimeout((()=>{const e=a.querySelector(`.${n.gradient}__marker_selected`);e&&e.focus()}),0)}if(["ArrowUp","ArrowDown"].includes(t)){const i=parseInt(o.dataset.index,10),s="ArrowDown"===t;if(!i&&s||i===c.stops.length-1&&!s)return;e.preventDefault();const d=s?i-1:i+1,h=c.stops[d];c.stops.forEach((e=>e.active=!1)),h.active=!0,r.color=h.color,r.opacity=h.opacity,l.trigger(),window.setTimeout((()=>{const e=a.querySelector(`.${n.gradient}__marker_selected`);e&&e.focus()}),0)}}function We(e){const{gradientLine:t}=this.elements;if(e.target!==t)return;const{currentValues:i}=this.props,{gradient:o}=i;if(!o||o.stops.length>=15)return;const{left:r,width:s}=t.getBoundingClientRect(),l=r+s,{clientX:a}=e;let c=A(0,(a-r)/(l-r),1);c=parseFloat(c.toFixed(3));const{stops:d}=o;let h=null,p=null;if(d.forEach((e=>{e.position<c&&(h&&h.position<=e.position||!h)&&(h=e),e.position>c&&(p&&p.position>=e.position||!p)&&(p=e),e.active=!1})),!h&&!p)return;const u={color:null,opacity:null,position:c,active:!0};if(h)if(p){const e=(c-h.position)/(p.position-h.position),t=T(h.color),n=T(p.color),i=[];for(let o=0;o<3;o++){const r=Math.round(t[o]+(n[o]-t[o])*e);i.push(r)}u.color=P(i);const o=null!==h.opacity?h.opacity:1,r=null!==p.opacity?p.opacity:1;u.opacity=o+(r-o)*e;const s=d.indexOf(p);d.splice(s,0,u)}else{u.color=h.color,u.opacity=h.opacity;const e=d.indexOf(h);d.splice(e+1,0,u)}else{u.color=p.color,u.opacity=p.opacity;const e=d.indexOf(p);d.splice(e,0,u)}i.color=u.color,i.opacity=u.opacity,this.props.colorChangeTrigger.trigger(),window.setTimeout((()=>{const e=t.querySelector(`.${n.gradient}__marker_selected`);e&&e.focus()}),0)}function Ae(e){e||(document.removeEventListener("pointermove",this.handleDocumentPointerMoveMarker),document.removeEventListener("pointermove",this.handleDocumentPointerMoveAngle),document.removeEventListener("pointerup",this.handleDocumentPointerUp),document.documentElement.style.removeProperty("user-select"),document.documentElement.style.removeProperty("-webkit-user-select"))}function Ie(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Ge(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var Fe=new WeakSet,Be=new WeakSet,je=new WeakSet;class Re{constructor(e){Ie(this,je),Ie(this,Be),Ie(this,Fe),this.props=e,this.props.colorUpdateTrigger.on(Ge(this,Be,Ke).bind(this))}render(){const{className:e,controls:t,isGradientOpacityOnly:i,isOpacityEnabled:o}=this.props,{gradient:r}=this.props.currentValues;let s=`${n.panel}__range`;e&&(s+=` ${e}`);const l="hue"===t?.001:.01,a=o&&(i&&r||!i);return this.element=u`
			<input
				type="range"
				className=${s}
				min="0"
				max="1"
				step=${l}
				onInput=${Ge(this,Fe,ze).bind(this)}
				onKeydown=${Ge(this,je,He).bind(this)}
				style=${"opacity"!==t||a?void 0:"display:none;"}
			/>
		`,Ge(this,Be,Ke).call(this),this.element}}function ze(){const e=parseFloat(this.element.value),{controls:t,currentValues:n,colorChangeTrigger:i}=this.props;if("opacity"===t&&U(n,n.color,e),"hue"===t){const t=n.color||[0,0,0];t[0]=e,U(n,t,n.opacity)}i.trigger()}function Ke(){const{controls:e,currentValues:t,isGradientOpacityOnly:n,colorChangeTrigger:i,isOpacityEnabled:o}=this.props;if("opacity"===e&&!o)return;const{color:r,opacity:s}=t;"opacity"===e&&(this.element.value=I(s)?s:1,n&&!t.gradient?(this.element.style.display="none",I(t.opacity)&&(t.opacity=null,i.trigger())):this.element.style.removeProperty("display")),"hue"===e&&(this.element.value=r?r[0]:0)}function He(e){const{key:t,shiftKey:n}=e;if("Enter"===t&&e.preventDefault(),["ArrowLeft","ArrowRight"].includes(t)){e.preventDefault();const i="ArrowRight"===t?1:-1,o=n?.05:.01,{value:r}=this.element,{controls:s}=this.props;let l=parseFloat(r);l=I(l)?l:"opacity"===s?1:0;const a=A(0,l+o*i,1);this.element.value=a,this.element.dispatchEvent(new Event("input"))}}function Xe(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function qe(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var Ye=new WeakSet,Je=new WeakSet;class Ze{constructor(e){Xe(this,Je),Xe(this,Ye),this.props=e,e.colorUpdateTrigger&&e.colorUpdateTrigger.on(f(qe(this,Ye,Qe).bind(this),50)),e.panelToggleTrigger.on(qe(this,Je,et).bind(this)),this.handleDocKeyDown=this.handleDocKeyDown.bind(this),this.handleDocPointerDown=this.handleDocPointerDown.bind(this)}render(){const{className:e,options:t,onChange:i,bindTo:o}=this.props,r=[qe(this,Ye,Qe).bind(this)];"function"==typeof i&&r.push(i);let s=`${n.panel}__select`;if(e&&(s+=` ${e}`),this.element=u`
			<select className=${s} onChange=${r}>
				${t.map((e=>{let{value:t,label:n,selected:i}=e;return u`
						<option value=${t} selected=${i||void 0}>${n}</option>
					`}))}
			</select>
		`,o){const[e,t]=o;e[t]=this.element}return qe(this,Ye,Qe).call(this),this.element}handleDocKeyDown(e){window.setTimeout((()=>{this.element.classList.toggle(`${n.panel}__select_focus`,document.activeElement===this.element&&"Tab"===e.key)}),0)}handleDocPointerDown(){this.element.classList.remove(`${n.panel}__select_focus`)}}function Qe(){const e=this.element,t=e.selectedOptions[0],n=u`
			<div className="select-helper">${t.innerText}</div>
		`;document.body.append(n),setTimeout((()=>{e.style.width=`${n.offsetWidth}px`,n.remove()}),0)}function et(e){e?(document.addEventListener("keydown",this.handleDocKeyDown),document.addEventListener("pointerdown",this.handleDocPointerDown)):(document.removeEventListener("keydown",this.handleDocKeyDown),document.removeEventListener("pointerdown",this.handleDocPointerDown),this.element.classList.remove(`${n.panel}__select_focus`))}function tt(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function nt(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var it=new WeakSet,ot=new WeakSet,rt=new WeakSet,st=new WeakSet;class lt{constructor(e){tt(this,st),tt(this,rt),tt(this,ot),tt(this,it),this.props=e,this.props.colorModeUpdateTrigger.on(nt(this,ot,ct).bind(this)),this.props.colorUpdateTrigger.on(nt(this,st,ht).bind(this)),this.elements={}}render(){const{isOpacityEnabled:e,isGradientOpacityOnly:t,colorMode:i,currentValues:o,colorChangeTrigger:r,colorUpdateTrigger:s,panelToggleTrigger:l,lang:a}=this.props,{gradient:c}=o,d=e&&(t&&c||!t),h="function"==typeof window.EyeDropper&&d,p="function"==typeof window.EyeDropper&&!h;this.elements.eyeDropperButton=u`
			<button
				className=${`${n.panel}__eyedropper`}
				onClick=${nt(this,it,at).bind(this)}
				tooltip=${y("pick_color",a)}
				type="button"
			></button>
		`;const g=["hex","rgb","hsl"].map((e=>({value:e,label:e.toUpperCase(),selected:i.mode===e}))),m=u`
			<div className=${`${n.panel}__inputs`}>
				<div className=${`${n.panel}__range-outer`} bindTo=${[this.elements,"rangeContainer"]}>
					<div className=${`${n.panel}__range-container`}>
						<${Re}
							className=${`${n.panel}__range_hue`}
							controls="hue"
							currentValues=${o}
							colorChangeTrigger=${r}
							colorUpdateTrigger=${s}
						/>
						<${Re}
							className=${`${n.panel}__range_opacity`}
							controls="opacity"
							currentValues=${o}
							colorChangeTrigger=${r}
							colorUpdateTrigger=${s}
							isGradientOpacityOnly=${t}
							isOpacityEnabled=${e}
						/>
					</div>
					${h?this.elements.eyeDropperButton:""}
				</div>
				<div className=${`${n.panel}__modes`} bindTo=${[this.elements,"modesContainer"]}>
					<${Ze}
						className=${`${n.panel}__modes-select`}
						options=${g}
						onChange=${nt(this,rt,dt).bind(this)}
						panelToggleTrigger=${l}
					/>
					<div
						className=${`${n.panel}__modes-inputs`}
						data-mode="hex"
						style=${"hex"===i.mode?void 0:"display:none;"}
						bindTo=${[this.elements,"hexContainer"]}
					>
						<${fe}
							controls="hex"
							currentValues=${o}
							colorChangeTrigger=${r}
							colorUpdateTrigger=${s}
							clearBtn=${!0}
						/>
						<${fe}
							controls="opacity"
							className=${`${n.panel}__input_opacity`}
							currentValues=${o}
							colorChangeTrigger=${r}
							colorUpdateTrigger=${s}
							isGradientOpacityOnly=${t}
							isOpacityEnabled=${e}
						/>
					</div>
					<div
						className=${`${n.panel}__modes-inputs`}
						data-mode="rgb"
						style=${"rgb"===i.mode?void 0:"display:none;"}
						bindTo=${[this.elements,"rgbContainer"]}
					>
						<${fe}
							controls="red"
							currentValues=${o}
							colorChangeTrigger=${r}
							colorUpdateTrigger=${s}
						/>
						<${fe}
							controls="green"
							currentValues=${o}
							colorChangeTrigger=${r}
							colorUpdateTrigger=${s}
						/>
						<${fe}
							controls="blue"
							currentValues=${o}
							colorChangeTrigger=${r}
							colorUpdateTrigger=${s}
						/>
						<${fe}
							controls="opacity"
							className=${`${n.panel}__input_opacity`}
							currentValues=${o}
							colorChangeTrigger=${r}
							colorUpdateTrigger=${s}
							isGradientOpacityOnly=${t}
							isOpacityEnabled=${e}
						/>
					</div>
					<div
						className=${`${n.panel}__modes-inputs`}
						data-mode="hsl"
						style=${"hsl"===i.mode?void 0:"display:none;"}
						bindTo=${[this.elements,"hslContainer"]}
					>
						<${fe}
							controls="hue"
							currentValues=${o}
							colorChangeTrigger=${r}
							colorUpdateTrigger=${s}
						/>
						<${fe}
							controls="saturation"
							currentValues=${o}
							colorChangeTrigger=${r}
							colorUpdateTrigger=${s}
						/>
						<${fe}
							controls="luma"
							currentValues=${o}
							colorChangeTrigger=${r}
							colorUpdateTrigger=${s}
						/>
						<${fe}
							controls="opacity"
							className=${`${n.panel}__input_opacity`}
							currentValues=${o}
							colorChangeTrigger=${r}
							colorUpdateTrigger=${s}
							isGradientOpacityOnly=${t}
							isOpacityEnabled=${e}
						/>
					</div>
					${p?this.elements.eyeDropperButton:""}
				</div>
			</div>
		`;return this.elements.container=m,m}}function at(){if("function"!=typeof window.EyeDropper)return;const e=new window.EyeDropper,t="/page/"===window.location.pathname?document.getElementById("closelayer"):null;t&&(t.style.backgroundColor="transparent"),e.open().then((e=>{t&&t.style.removeProperty("background-color");const n=_(e.sRGBHex),{currentValues:i,colorChangeTrigger:o}=this.props;U(i,n,null),o.trigger()})).catch((()=>{t&&t.style.removeProperty("background-color")}))}function ct(){const e=this.props.colorMode.mode;["hex","rgb","hsl"].forEach((t=>{const n=this.elements[`${t}Container`];t===e?n.style.removeProperty("display"):n.style.display="none"}))}function dt(e){const{value:t}=e.target;this.props.colorMode.mode=t}function ht(){const{isOpacityEnabled:e,isGradientOpacityOnly:t}=this.props,{gradient:n}=this.props.currentValues,{eyeDropperButton:i,rangeContainer:o,modesContainer:r}=this.elements,s=e&&(t&&n||!t),l="function"==typeof window.EyeDropper&&s,a="function"==typeof window.EyeDropper&&!l;l||a||!i.parentElement?l&&i.parentElement!==o?o.append(i):a&&i.parentElement!==r&&r.append(i):i.remove()}function pt(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function ut(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var gt=new WeakSet,mt=new WeakSet,yt=new WeakSet,ft=new WeakSet,vt=new WeakSet,$t=new WeakSet,bt=new WeakSet,wt=new WeakSet,_t=new WeakSet,Tt=new WeakSet,Ct=new WeakSet,Et=new WeakSet,kt=new WeakSet,Pt=new WeakSet,St=new WeakSet,Lt=new WeakSet,Dt=new WeakSet,Mt=new WeakSet,xt=new WeakSet,Ot=new WeakSet,Ut=new WeakSet,Nt=new WeakSet,Vt=new WeakSet;class Wt{constructor(e){pt(this,Vt),pt(this,Nt),pt(this,Ut),pt(this,Ot),pt(this,xt),pt(this,Mt),pt(this,Dt),pt(this,Lt),pt(this,St),pt(this,Pt),pt(this,kt),pt(this,Et),pt(this,Ct),pt(this,Tt),pt(this,_t),pt(this,wt),pt(this,bt),pt(this,$t),pt(this,vt),pt(this,ft),pt(this,yt),pt(this,mt),pt(this,gt),this.props=e,this.elements={libraryContainers:{}},this.savedColors=[],this.tildaColors=null,this.activeLibrary=null,this.props.panelToggleTrigger.on(ut(this,Nt,sn).bind(this)),this.props.colorUpdateTrigger.on(v(ut(this,Vt,ln).bind(this),100)),this.handleDocumentPointerMove=this.handleDocumentPointerMove.bind(this),this.handleDocumentPointerUp=this.handleDocumentPointerUp.bind(this)}render(){const{isGradientsEnabled:e,noDocumentColors:t,panelToggleTrigger:i,lang:o,defaultLibrary:s}=this.props,l=window.localStorage.getItem("tColorpickerLibrary");let a=s||l&&r[l]||"document_colors";e||"tilda_gradients"!==a||(a="document_colors"),t&&"document_colors"===a&&(a="saved_colors"),this.activeLibrary=a;const c=["document_colors","saved_colors","tilda_colors","tilda_gradients"].map((e=>({label:y(e,o),value:e,selected:a===e})));t&&c.shift(),e||c.pop();const d=u`
			<div className=${`${n.panel}__library`}>
				<${Ze}
					className=${`${n.panel}__library-select`}
					options=${c}
					onChange=${ut(this,Mt,tn).bind(this)}
					panelToggleTrigger=${i}
					bindTo=${[this.elements,"librarySelect"]}
				/>
				${t?"":u`
							<div
								className=${`${n.panel}__swatches`}
								data-lib="document_colors"
								style=${"document_colors"===a?void 0:"display:none;"}
								bindTo=${[this.elements.libraryContainers,"document_colors"]}
							>
								${y("loading",o)}
							</div>
						`}
				<div
					className=${`${n.panel}__swatches`}
					data-lib="saved_colors"
					style=${"saved_colors"===a?void 0:"display:none;"}
					bindTo=${[this.elements.libraryContainers,"saved_colors"]}
				>
					${y("loading",o)}
				</div>
				<div
					className=${`${n.panel}__tcolors`}
					data-lib="tilda_colors"
					style=${"tilda_colors"===a?void 0:"display:none;"}
					bindTo=${[this.elements.libraryContainers,"tilda_colors"]}
				>
					${y("loading",o)}
				</div>
				${e?u`
							<div
								className=${`${n.panel}__tcolors`}
								data-lib="tilda_gradients"
								style=${"tilda_gradients"===a?void 0:"display:none;"}
								bindTo=${[this.elements.libraryContainers,"tilda_gradients"]}
							>
								${y("loading",o)}
							</div>
						`:""}
			</div>
		`;return this.elements.container=d,ut(this,$t,jt).call(this),ut(this,Tt,Ht).call(this),t||ut(this,_t,Kt).call(this),d}handleDocumentPointerMove(e){const{clientX:t}=e,{navContainer:n}=this.elements,i=this.navPointerStartPos-t;this.navPointerStartPos=t,n.scrollLeft+=i}handleDocumentPointerUp(){document.removeEventListener("pointermove",this.handleDocumentPointerMove),document.removeEventListener("pointerup",this.handleDocumentPointerUp),document.documentElement.style.removeProperty("user-select"),document.documentElement.style.removeProperty("-webkit-user-select")}}function At(e){const t=this.elements.libraryContainers.document_colors;t.innerHTML="";const n=e.map((e=>ut(this,Pt,Jt).call(this,e)));n.length&&t.append(...n)}function It(){const{isGradientsEnabled:e,noDocumentColors:t,defaultLibrary:n}=this.props,{librarySelect:i}=this.elements,o=this.elements.libraryContainers.document_colors,s=i.querySelector('option[value="document_colors"]'),l=o&&!o.childElementCount,a=window.localStorage.getItem("tColorpickerLibrary")||i.value;let c=n||a&&r[a]||"document_colors";e||"tilda_gradients"!==c||(c="document_colors"),(t||l)&&"document_colors"===c&&(c="saved_colors"),this.activeLibrary=c,s&&(s.disabled=l),i.value!==c&&(i.value=c,i.dispatchEvent(new Event("change"))),ut(this,Vt,ln).call(this)}function Gt(){const{lang:e}=this.props,t=this.elements.libraryContainers.saved_colors;t.innerHTML="";const i=this.savedColors.map((e=>ut(this,Pt,Jt).call(this,e,!0))),o=u`
			<button
				type="button"
				className=${`${n.panel}__add-swatch`}
				onClick=${ut(this,St,Zt).bind(this)}
				style=${`${this.savedColors.length<a?void 0:"display:none;"}`}
				bindTo=${[this.elements,"addButton"]}
				tooltip=${y("save_color",e)}
			></button>
		`;i.push(o),t.append(...i),ut(this,kt,Yt).call(this)}function Ft(){const{tildaColors:e}=this;if(!e)return;const{lang:t}=this.props,i=this.elements.libraryContainers.tilda_colors;i.innerHTML="",this.elements.colorLists={},this.elements.navItems={};const o=e.colors[0],r=ut(this,wt,zt).call(this),s=u`
			<div className=${`${n.panel}__tcolors-wrapper`}>
				<div className=${`${n.panel}__tcolors-nav-wrapper`}>
					<div
						className=${`${n.panel}__tcolors-nav`}
						bindTo=${[this.elements,"navContainer"]}
						onScroll=${ut(this,Ot,on).bind(this)}
						onPointerDown=${ut(this,Ut,rn).bind(this)}
					>
						${c.map(((e,i)=>{const s=o[e],l=r===e||!r&&!i,a={EN:{[e]:s.name_en},RU:{[e]:s.name}};return u`
								<button
									type="button"
									className=${`${n.panel}__tcolors-nav-item${l?` ${n.panel}__tcolors-nav-item_active`:""}`}
									data-group=${e}
									onClick=${ut(this,xt,nn).bind(this)}
									bindTo=${[this.elements.navItems,e]}
								>
									${y(e,t,a)}
								</button>
							`}))}
					</div>
				</div>
				${c.map(((e,t)=>{const i=o[e],s=r===e||!r&&!t,l=i.hex;return u`
						<div
							className=${`${n.panel}__tcolors-list`}
							data-group=${e}
							style=${s?void 0:"display:none;"}
							bindTo=${[this.elements.colorLists,e]}
						>
							${l.map((e=>ut(this,Pt,Jt).call(this,e)))}
						</div>
					`}))}
			</div>
		`;i.append(s)}function Bt(){const{tildaColors:e}=this;if(!e)return;const t=this.elements.libraryContainers.tilda_gradients;t.innerHTML="";const i=e.gradients,o=u`
			<div className=${`${n.panel}__tcolors-wrapper`}>
				<div className=${`${n.panel}__tcolors-list ${n.panel}__tcolors-list_gradients`}>
					${i.map((e=>{const t=O({type:"linear",stops:[{color:_(e.hex1),position:0,opacity:1},{color:_(e.hex2),position:1,opacity:1}],angle:0});return ut(this,Pt,Jt).call(this,t)}))}
				</div>
			</div>
		`;t.append(o)}async function jt(){const{isGradientsEnabled:e,lang:t}=this.props;if(this.tildaColors)return ut(this,ft,Ft).call(this),void(e&&ut(this,vt,Bt).call(this));const n=JSON.parse(window.localStorage.getItem("tildacolors"));if(n&&Date.now()-n.timestamp<l)return this.tildaColors=n,ut(this,bt,Rt).call(this),ut(this,ft,Ft).call(this),void(e&&ut(this,vt,Bt).call(this));try{const t=await fetch(s),n=await t.json();n.timestamp=Date.now(),window.localStorage.setItem("tildacolors",JSON.stringify(n)),this.tildaColors=n,ut(this,bt,Rt).call(this),ut(this,ft,Ft).call(this),e&&ut(this,vt,Bt).call(this)}catch(e){console.error(e);const{tilda_colors:n,tilda_gradients:i}=this.elements.libraryContainers;n.innerText=y("load_error",t),i&&(i.innerText=y("load_error",t))}}function Rt(){const{tildaColors:e}=this;e&&Object.values(e.colors[0]).forEach((e=>{e.hsl=e.hex.map(_)}))}function zt(){const{tildaColors:e}=this,{openMatchingColorLibraryOnColorChange:t,currentValues:n}=this.props;if(!e||!t||!n.color)return null;const i=n.color;let o=null,r=0;return Object.entries(e.colors[0]).forEach((e=>{let[t,{hsl:n}]=e;const s=n.map((e=>j(i,e))),l=Math.max(...s);l>r&&(o=t,r=l)})),o}function Kt(){const{isOpacityEnabled:e,isGradientOpacityOnly:t,isGradientsEnabled:n}=this.props,i=function(e,t,n){const i=[];return document.querySelectorAll(".t396 .tn-elem, .tn-artboard .tn-elem").forEach((n=>{const o=n.querySelector(".tn-atom");if(!o)return;const r=n.getAttribute("data-elem-type");if("button"===r||"shape"===r||"text"===r||"image"===r||"video"===r||"tooltip"===r){const n=N(o,e,t);i.push(...n)}})),document.querySelectorAll(['.record div[id^="rec"]','.record div[id^="rec"] [field="title"]','.record div[id^="rec"] [field="title"] *','.record div[id^="rec"] [field="descr"]','.record div[id^="rec"] [field="descr"] *','.record div[id^="rec"] [field="text"]','.record div[id^="rec"] [field="text"] *','.record div[id^="rec"] [field="subtitle"]','.record div[id^="rec"] [field="subtitle"] *','.record div[id^="rec"] .t-name','.record div[id^="rec"] .t-name *','.record div[id^="rec"] .t-menu__link-item','.record div[id^="rec"] .t-title','.record div[id^="rec"] .t-title *','.record div[id^="rec"] .t-descr','.record div[id^="rec"] .t-descr *','.record div[id^="rec"] .t-btn','.record div[id^="rec"] .t-btn *','.record div[id^="rec"] a','.record div[id^="rec"] a *'].join(",")).forEach((o=>{const r=N(o,e,t,n);i.push(...r)})),[...new Set(i)]}(e,t,n);ut(this,gt,At).call(this,i)}function Ht(){const{swatchesKey:e}=this.props;if(!e)return this.savedColors=[],ut(this,yt,Gt).call(this);const t=JSON.parse(localStorage.getItem("tMinicolors"))||{};this.savedColors=Array.isArray(t[e])?t[e]:[],ut(this,yt,Gt).call(this)}function Xt(e){const{isOpacityEnabled:t,isGradientOpacityOnly:n,isGradientsEnabled:i}=this.props,o=e.includes("gradient");if(o&&!i)return!1;const r=o?b(e,!0):$(e,!0);if(o){return!!!r.stops.find((e=>{let{opacity:t}=e;return I(t)&&t<1}))||t}{const e=r[3];return!(I(e)&&e<1)||t&&!n}}function qt(e){const{currentValues:t,colorChangeTrigger:n}=this.props,{target:i,shiftKey:o}=e,{color:r}=i.dataset,s=r.includes("gradient"),l=s?b(r,!0):$(r,!0);if(l){if(s)t.gradient=l,t.color=l.stops[0].color,t.opacity=l.stops[0].opacity;else{const e=4===l.length?l.pop():null;U(t,l,e,!o)}n.trigger()}}function Yt(){m(t).then((()=>{if("function"!=typeof window.TSortableLite)throw new TypeError("TSortableLite is not defined");const e=this.elements.libraryContainers.saved_colors,t=e.closest(`.${n.panel}`);let i=null;const{addButton:r}=this.elements;this.sortable&&this.sortable.destroy(),this.sortable=new window.TSortableLite(e,{...o,onStart:()=>{i=t.getBoundingClientRect()},onMove:e=>{const t=e.draggingElement,o=e.originalEvent.clientX,r=e.originalEvent.clientY,s=i.left,l=s+i.width,a=i.top,c=a+i.height;if(o>=s&&o<=l&&r>=a&&r<=c){document.documentElement.style.removeProperty("cursor");this.sortable._dragImage.style.removeProperty("cursor"),t.classList.remove(`${n.panel}__swatch_del`)}else{document.documentElement.style.cursor="no-drop",t.classList.add(`${n.panel}__swatch_del`);this.sortable._dragImage.style.cursor="no-drop"}},onDrop:e=>{const t=e.draggingElement;t.classList.contains(`${n.panel}__swatch_del`)&&(t.remove(),r.style.removeProperty("display")),ut(this,Dt,en).call(this)},onEnd:e=>{const t=e.draggingElement;document.documentElement.style.removeProperty("cursor"),t.classList.contains(`${n.panel}__swatch_del`)&&(t.remove(),r.style.removeProperty("display"),ut(this,Dt,en).call(this))}}),this.sortable.init()})).catch((e=>{console.error(e)}))}function Jt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{lang:i}=this.props;return u`
			<button
				type="button"
				className=${`${n.panel}__swatch`}
				style=${`background:${e};${ut(this,Ct,Xt).call(this,e)||!t?"":"display:none;"}`}
				data-color=${e}
				onClick=${ut(this,Et,qt).bind(this)}
				onKeyDown=${t?ut(this,Lt,Qt).bind(this):void 0}
				tooltip=${W(e,i)}
			></button>
		`}function Zt(){const{color:e,opacity:t,gradient:i}=this.props.currentValues,{lang:o}=this.props;let r="";if(i?r=O(i)||"":e&&(r=`rgba(${C([...e,t]).join(",")})`),r){this.savedColors.push(r);const e=u`
				<button
					type="button"
					className=${`${n.panel}__swatch`}
					style=${`background:${r};${ut(this,Ct,Xt).call(this,r)?"":"display:none;"}`}
					data-color=${r}
					onClick=${ut(this,Et,qt).bind(this)}
					tooltip=${W(r,o)}
				></button>
			`,{addButton:t}=this.elements;t.before(e),ut(this,Dt,en).call(this),this.savedColors.length>=a&&(t.style.display="none")}}function Qt(e){const{key:t,target:n}=e,{addButton:i}=this.elements;"Backspace"===t&&(n.remove(),i.style.removeProperty("display"),ut(this,Dt,en).call(this))}function en(){const{swatchesKey:e}=this.props,t=this.elements.libraryContainers.saved_colors;this.savedColors=[...t.querySelectorAll(`.${n.panel}__swatch`)].map((e=>e.dataset.color));const i=JSON.parse(localStorage.getItem("tMinicolors"))||{};i[e]=this.savedColors,localStorage.setItem("tMinicolors",JSON.stringify(i))}function tn(e){const{value:t}=e.target,n=Object.entries(r).find((e=>{let[,n]=e;return n===t}))[0];window.localStorage.setItem("tColorpickerLibrary",n),this.activeLibrary=n,Object.entries(this.elements.libraryContainers).forEach((e=>{let[n,i]=e;n===t?i.style.removeProperty("display"):i.style.display="none"}))}function nn(e){const{target:t}=e,i=`${n.panel}__tcolors-nav-item_active`,{group:o}=t.dataset,{colorLists:r,navItems:s}=this.elements;c.forEach((e=>{e===o?(r[e].style.removeProperty("display"),s[e].classList.add(i)):(r[e].style.display="none",s[e].classList.remove(i))})),V({endX:t.offsetLeft,endY:0},t.parentElement)}function on(){const{navContainer:e}=this.elements,t=e.parentElement,i=e.scrollWidth,o=e.clientWidth,r=e.scrollLeft+o>=i-1,s=`${n.panel}__tcolors-nav-wrapper_scrolled`;r?t.classList.add(s):t.classList.remove(s)}function rn(e){this.navPointerStartPos=e.clientX,document.addEventListener("pointermove",this.handleDocumentPointerMove),document.addEventListener("pointerup",this.handleDocumentPointerUp),document.documentElement.style.userSelect="none",document.documentElement.style.webkitUserSelect="none"}function sn(e){if(e){const{noDocumentColors:e}=this.props;ut(this,$t,jt).call(this),ut(this,Tt,Ht).call(this),e||ut(this,_t,Kt).call(this),ut(this,mt,It).call(this)}else this.sortable&&this.sortable.destroy(),this.handleDocumentPointerUp()}function ln(){const{currentValues:e}=this.props;if(!e.color||"tilda_colors"!==this.activeLibrary)return;const t=ut(this,wt,zt).call(this);if(!t)return;const n=this.elements.navItems[t];n&&ut(this,xt,nn).call(this,{target:n})}function an(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function cn(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var dn=new WeakSet,hn=new WeakSet,pn=new WeakSet,un=new WeakSet,gn=new WeakSet,mn=new WeakSet,yn=new WeakSet,fn=new WeakSet;class vn{constructor(e){an(this,fn),an(this,yn),an(this,mn),an(this,gn),an(this,un),an(this,pn),an(this,hn),an(this,dn),this.config=e.config,this.colorChangeTrigger=e.colorChangeTrigger,this.colorUpdateTrigger=e.colorUpdateTrigger,this.panelToggleTrigger=e.panelToggleTrigger,this.currentValues=e.currentValues,this.input=e.input,this.container=e.container,this.isOpen=!1,this.isClickStartedOnPanel=!1,this.element=null,this.focusTrap=null,this.resizeObserver=null,this.currentPosition=null,this.fromClass=null,this.currentCoords={x:0,y:0};const t=g();this.colorModeUpdateTrigger=t,this.colorMode={_mode:"hex",set mode(e){this._mode=e,t.trigger()},get mode(){return this._mode}},this.colorUpdateTrigger.on(cn(this,gn,Tn).bind(this)),this.handleDocPointerDown=this.handleDocPointerDown.bind(this),this.handleDocClick=this.handleDocClick.bind(this),this.handleDocKeyDown=this.handleDocKeyDown.bind(this),this.throttledUpdatePosition=v(cn(this,pn,wn).bind(this),50),this.handleWindowResize=this.throttledUpdatePosition,this.handleDocPointerMoveDrag=this.handleDocPointerMoveDrag.bind(this),this.handleDocPointerUpDrag=this.handleDocPointerUpDrag.bind(this),this.handlePanelTransition=this.handlePanelTransition.bind(this)}open(){if(this.isOpen)return;const e=window.matchMedia("(max-width: 640px)").matches;this.element||(this.element=cn(this,dn,$n).call(this)),this.focusTrap||(this.focusTrap=function(e){const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),n=t[0],i=t[t.length-1],o=t=>{const{key:o,shiftKey:r}=t;if("Tab"!==o)return;const{activeElement:s}=document;s&&e.contains(s)||(t.preventDefault(),r?i.focus():n.focus()),s===n&&r&&(t.preventDefault(),i.focus()),s!==i||r||(t.preventDefault(),n.focus())};return document.addEventListener("keydown",o),{release:()=>{document.removeEventListener("keydown",o)}}}(this.element));const{appendTo:t}=this.config;t.append(this.element),this.element.removeEventListener("transitionend",this.handlePanelTransition),this.isOpen=!0,this.panelToggleTrigger.trigger(!0),e?this.element.classList.remove(`${n.panel}_hidden`):(cn(this,pn,wn).call(this,!0),this.resizeObserver=new ResizeObserver(cn(this,pn,wn).bind(this)),this.resizeObserver.observe(this.element),this.fromClass?(this.element.style.transition="none",this.element.classList.add(this.fromClass),window.setTimeout((()=>{this.element.style.removeProperty("transition"),this.element.classList.remove(`${n.panel}_hidden`),this.element.classList.remove(this.fromClass)}),0)):this.element.classList.remove(`${n.panel}_hidden`)),document.addEventListener("pointerdown",this.handleDocPointerDown),document.addEventListener("click",this.handleDocClick),document.addEventListener("keydown",this.handleDocKeyDown),window.addEventListener("resize",this.handleWindowResize)}close(){this.isOpen&&this.element&&(this.isOpen=!1,this.isClickStartedOnPanel=!1,this.panelToggleTrigger.trigger(!1),this.focusTrap&&this.focusTrap.release(),this.focusTrap=null,this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),document.removeEventListener("pointerdown",this.handleDocPointerDown),document.removeEventListener("click",this.handleDocClick),document.removeEventListener("keydown",this.handleDocKeyDown),window.removeEventListener("resize",this.handleWindowResize),this.handleDocPointerUpDrag(),this.currentPosition=null,this.fromClass&&this.element.classList.remove(this.fromClass),this.element.classList.add(`${n.panel}_hidden`),this.element.addEventListener("transitionend",this.handlePanelTransition),window.setTimeout((()=>{0===this.element.offsetWidth&&this.handlePanelTransition()}),0))}handlePanelTransition(){this.element.remove(),this.fromClass=null,this.element.removeEventListener("transitionend",this.handlePanelTransition)}handleDocPointerMoveDrag(e){const{clientX:t,clientY:n}=e,{dragStartX:i,dragStartY:o,dragStartCoords:r}=this,s=t-i,l=n-o;let{x:a,y:c}=r;a+=s,c+=l,this.currentCoords={x:a,y:c},cn(this,pn,wn).call(this,!0,!0)}handleDocPointerUpDrag(){document.removeEventListener("pointermove",this.handleDocPointerMoveDrag),document.removeEventListener("pointerup",this.handleDocPointerUpDrag),document.documentElement.style.removeProperty("user-select"),document.documentElement.style.removeProperty("-webkit-user-select"),delete this.dragStartCoords,delete this.dragStartX,delete this.dragStartY}handleDocPointerDown(e){this.isClickStartedOnPanel=this.element&&this.element.contains(e.target)}handleDocClick(e){if(this.isClickStartedOnPanel)return void(this.isClickStartedOnPanel=!1);const{target:t}=e,{element:n,input:i,container:o}=this,{activeElement:r}=document,{isNoInputMode:s}=this.config;n.contains(t)||i.contains(t)||o&&o.contains(t)||!s&&r===i||this.close()}handleDocKeyDown(e){const{key:t}=e;"Escape"===t&&this.close()}set theme(e){this.element&&this.element.classList.toggle(n.panelThemeDark,"dark"===e),this.config.theme=e}}function $n(){const{theme:e,panelZIndex:t,noDocumentColors:i,gradientHint:o,swatchesKey:r,isGradientsEnabled:s,isOpacityEnabled:l,isGradientOpacityOnly:a,isTextContrastCheckEnabled:c,isNoInputMode:d,lang:h,defaultLibrary:p,openMatchingColorLibraryOnColorChange:g}=this.config,{color:m,gradient:f}=this.currentValues,v=[{label:y("solid",h),value:"solid",selected:!f},{label:y("linear",h),value:"linear",selected:f&&"linear"===f.type},{label:y("radial",h),value:"radial",selected:f&&"radial"===f.type}],$=!!o.EN.gradient_hint&&f,b=m?`#${k(m)}`:"",w=u`
			<div
				className=${`${n.panel} ${n.panel}_hidden`}
				style=${`z-index:${t};--current-color:${b};`}
			>
				${s?u`
							<div
								className=${`${n.panel}__head`}
								onPointerdown=${cn(this,un,_n).bind(this)}
							>
								<${Ze}
									className=${`${n.panel}__gradient-select`}
									options=${v}
									onChange=${cn(this,mn,Cn).bind(this)}
									bindTo=${[this,"gradientSelect"]}
									colorUpdateTrigger=${this.colorUpdateTrigger}
									panelToggleTrigger=${this.panelToggleTrigger}
								/>
								${$?cn(this,hn,bn).call(this):""}
								<button
									type="button"
									className=${`${n.panel}__close-btn`}
									onClick=${this.close.bind(this)}
									tooltip=${y("close",h)}
								></button>
							</div>
						`:""}
				${s?u`
							<${Me}
								currentValues=${this.currentValues}
								colorChangeTrigger=${this.colorChangeTrigger}
								colorUpdateTrigger=${this.colorUpdateTrigger}
								panelToggleTrigger=${this.panelToggleTrigger}
								lang=${h}
							/>
						`:""}
				<${J}
					currentValues=${this.currentValues}
					colorMode=${this.colorMode}
					colorModeUpdateTrigger=${this.colorModeUpdateTrigger}
					colorChangeTrigger=${this.colorChangeTrigger}
					colorUpdateTrigger=${this.colorUpdateTrigger}
					panelToggleTrigger=${this.panelToggleTrigger}
					bindTo=${[this,"colorAreaElement"]}
				/>
				<${lt}
					currentValues=${this.currentValues}
					colorMode=${this.colorMode}
					colorModeUpdateTrigger=${this.colorModeUpdateTrigger}
					isOpacityEnabled=${l}
					isGradientOpacityOnly=${a}
					colorChangeTrigger=${this.colorChangeTrigger}
					colorUpdateTrigger=${this.colorUpdateTrigger}
					panelToggleTrigger=${this.panelToggleTrigger}
					lang=${h}
				/>
				${c?u`
							<${ae}
								currentValues=${this.currentValues}
								input=${this.input}
								panelToggleTrigger=${this.panelToggleTrigger}
								colorUpdateTrigger=${this.colorUpdateTrigger}
								lang=${h}
							/>
						`:""}
				<${Wt}
					currentValues=${this.currentValues}
					noDocumentColors=${i}
					isGradientsEnabled=${s}
					isOpacityEnabled=${l}
					isGradientOpacityOnly=${a}
					swatchesKey=${r}
					colorChangeTrigger=${this.colorChangeTrigger}
					colorUpdateTrigger=${this.colorUpdateTrigger}
					panelToggleTrigger=${this.panelToggleTrigger}
					lang=${h}
					defaultLibrary=${p}
					openMatchingColorLibraryOnColorChange=${g}
				/>
				${d?u`
							<div className=${`${n.panel}__btns`}>
								<button
									className=${`${n.panel}__action-btn ${n.panel}__action-btn_clear`}
									onClick=${cn(this,yn,En).bind(this)}
									type="button"
								>
									${y("clear",h)}
								</button>
								<button
									className=${`${n.panel}__action-btn ${n.panel}__action-btn_apply`}
									onClick=${cn(this,fn,kn).bind(this)}
									type="button"
								>
									${y("apply",h)}
								</button>
							</div>
						`:""}
			</div>
		`;return"dark"===e&&w.classList.add(n.panelThemeDark),F(w),w}function bn(){const{gradientHint:e,lang:t}=this.config;return u`
			<${ie}
				className=${`${n.panel}__hint_gradient`}
				hintText=${y("gradient_hint",t,e)}
				label="!"
				bindTo=${[this,"gradientHintElement"]}
			/>
		`}function wn(e,t){const i=window.matchMedia("(max-width: 640px)").matches,{colorAreaElement:o,element:r,input:s}=this;if(!r||!o||i)return;const{positionPriority:l}=this.config,[a,c,d,h]=this.config.viewboxPadding,[p,u,g,m]=this.config.panelGap,y=r.getBoundingClientRect(),f=s.getBoundingClientRect(),v=o.getBoundingClientRect(),$=document.documentElement.clientWidth,b=document.documentElement.clientHeight,{width:w,height:_}=y,T=v.top-y.top+v.height/2,C={bottom:b-f.top-f.height-g-d>=_,right:$-f.left-f.width-u-c>=w,left:f.left-m-h>=w,top:f.top-p-a>=_},E=e=>{let t=0,n=0;return"bottom"===e?(t=f.left,n=f.top+f.height+g):"right"===e?(t=f.left+f.width+u,n=f.top-T+f.height/2):"left"===e?(t=f.left-m-w,n=f.top-T+f.height/2):"top"===e&&(t=f.left,n=f.top-p-_),{x:t,y:n}};let k=this.currentCoords.x,P=this.currentCoords.y;if(!(this.currentPosition&&C[this.currentPosition]||t))for(const e of l)if(C[e]){this.fromClass=`${n.panel}_from-${e}`;const t=E(e);this.currentPosition=e,this.currentCoords=t,k=t.x,P=t.y;break}r.classList.toggle(`${n.panel}_instant-transition`,!0===e),k=A(h,k,$-w-c),P=A(a,P,b-_-d),this.currentCoords={x:k,y:P},r.style.translate=`${k}px ${P}px`}function _n(e){const t=window.matchMedia("(max-width: 640px)").matches,i=e.target.classList.contains(`${n.panel}__head`);if(t||!i)return;const{clientX:o,clientY:r}=e;this.dragStartX=o,this.dragStartY=r,this.dragStartCoords={...this.currentCoords},document.addEventListener("pointermove",this.handleDocPointerMoveDrag),document.addEventListener("pointerup",this.handleDocPointerUpDrag),document.documentElement.style.userSelect="none",document.documentElement.style.webkitUserSelect="none"}function Tn(){const{gradientSelect:e,gradientHintElement:t}=this,{gradient:n,color:i}=this.currentValues,{gradientHint:o}=this.config;e&&(e.value=n?n.type:"solid");const r=!!o.EN.gradient_hint&&n;if(t?r?t.style.removeProperty("display"):t.style.display="none":r&&(this.gradientHintElement=cn(this,hn,bn).call(this),e&&e.after(this.gradientHintElement)),this.element){const e=i?`#${k(i)}`:"";this.element.style.setProperty("--current-color",e)}}function Cn(){const{gradientSelect:e,currentValues:t,colorChangeTrigger:n}=this,{color:i,opacity:o,gradient:r}=t,{value:s}=e,{isOpacityEnabled:l}=this.config;if(["linear","radial"].includes(s)&&r&&(r.type=s),"solid"===s&&r){const e=r.stops.find((e=>{let{active:t}=e;return t}))||r.stops[0];t.color=e&&e.color||[0,0,0],t.opacity=e&&I(e.opacity)?e.opacity:null,t.gradient=null}if(["linear","radial"].includes(s)&&!r){const e=i||[0,0,0];t.gradient={type:s,angle:0,stops:[{color:[...e],opacity:I(o)?o:1,position:0,active:!0},{color:[...e],opacity:l?0:1,position:1}]}}n.trigger()}function En(){const{colorChangeTrigger:e,currentValues:t}=this;t.color=null,t.opacity=null,t.gradient=null,e.trigger({isPanelButton:!0}),this.close()}function kn(){const{colorChangeTrigger:e}=this;e.trigger({isPanelButton:!0}),this.close()}class Pn extends CustomEvent{constructor(e){super("paneltoggle"),this.isOpen=e}}class Sn extends CustomEvent{constructor(e,t,n){super(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"colorchange"),n&&((n=JSON.parse(JSON.stringify(n))).css=O(n),"radial"===n.type&&"angle"in n&&delete n.angle,n.stops.forEach((e=>{null===e.opacity&&(e.opacity=1),"active"in e&&delete e.active}))),this.currentColor={hex:e?"#"+k(e):e,rgb:e?T(e):e,hsl:e,opacity:null===t&&e?1:t,gradient:n}}}function Ln(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Dn(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var Mn=new WeakSet,xn=new WeakSet,On=new WeakSet,Un=new WeakSet,Nn=new WeakSet,Vn=new WeakSet,Wn=new WeakSet,An=new WeakSet,In=new WeakSet,Gn=new WeakSet,Fn=new WeakSet;function Bn(){const{isOpacityEnabled:e,isGradientsEnabled:t,isGradientOpacityOnly:n,swatchesKey:i,theme:o,isNoInputMode:r,panelZIndex:s,noDocumentColors:l,panelGap:a,gradientHint:c,isTextContrastCheckEnabled:d,viewboxPadding:h,positionPriority:p,appendTo:u,lang:g,defaultLibrary:m,openMatchingColorLibraryOnColorChange:y}=this.config,{colorChangeTrigger:f,colorUpdateTrigger:v,panelToggleTrigger:$,currentValues:b}=this,{input:w,container:_}=this.elements;return new vn({config:{isOpacityEnabled:e,isGradientsEnabled:t,isGradientOpacityOnly:n,swatchesKey:i,theme:o,isNoInputMode:r,panelZIndex:s,noDocumentColors:l,panelGap:a,gradientHint:c,isTextContrastCheckEnabled:d,viewboxPadding:h,positionPriority:p,appendTo:u,lang:g,defaultLibrary:m,openMatchingColorLibraryOnColorChange:y},colorChangeTrigger:f,colorUpdateTrigger:v,panelToggleTrigger:$,currentValues:b,input:w,container:_})}function jn(){const{input:e}=this.elements,{isNoInputMode:t,disablePanelToggleOnInputReplacementClick:n}=this.config;t?n||e.addEventListener("click",this.handleInputReplacementClick):(e.addEventListener("input",this.handleInput),e.addEventListener("focus",this.openPanel),e.addEventListener("blur",this.handleInputBlur),e.addEventListener("keydown",this.handleInputKeydown))}function Rn(e,t){const{emptyColorKeywords:n,isGradientsEnabled:i,isOpacityEnabled:o,isGradientOpacityOnly:r}=this.config,s=n.find((t=>t===e)),l=e.replace(/[^0-9A-Za-z]/g,""),{currentValues:a}=this;if(e&&l&&!s){const t=b(e);if(i&&t)o||t.stops.forEach((e=>e.opacity=1)),a.gradient=t,a.color=t.stops[0].color,a.opacity=t.stops[0].opacity;else{const t=$(e);let n=4===t.length?t.pop():null;n=o&&!r?n:null,U(a,t,n,!1)}this.emptyColorString=null}else a.color=null,a.opacity=null,a.gradient=null,this.emptyColorString=s||null;t?this.colorUpdateTrigger.trigger():this.colorChangeTrigger.trigger()}function zn(){const{input:e}=this.elements;e.value="",e.dispatchEvent(new Event("input")),this.closePanel()}function Kn(){const{input:e}=this.elements;e.focus()}function Hn(){const{container:e}=this.elements,{isClearBtnHidden:t}=this.config;t||e.classList.add(`${n.container}_clear-btn-visible`)}function Xn(){const{container:e}=this.elements;this.panel&&this.panel.isOpen||e.classList.remove(`${n.container}_clear-btn-visible`)}function qn(e){const{input:t}=this.elements,n=new Pn(e);t.dispatchEvent(n),e||Dn(this,Wn,Xn).call(this)}function Yn(){const{format:e,letterCase:t,isGradientsEnabled:n}=this.config,i=this.currentValues.color,o=this.currentValues.gradient;if(!i)return this.emptyColorString||"";let r="";if(n&&o)r=O(o);else if("hex"===e)r=`#${k(i)}`;else if("rgb"===e)r=`rgb(${T(i).join(",")})`;else if("hsl"===e){let[e,t,n]=i;e=Math.round(360*e),t=Math.round(100*t),n=Math.round(100*n),r=`hsl(${e},${t}%,${n}%)`}return"uppercase"!==t||r.includes("gradient")?r.toLowerCase():r.toUpperCase()}function Jn(e){this.colorUpdateTrigger.trigger(e);const t=e&&e.isPanelButton,{isNoInputMode:n}=this.config,i=n&&t||!n?"colorchange":"colorupdate";this.dispatchColorChangeEvent(i)}function Zn(){const{isNoInputMode:e,isGradientsEnabled:t,isClearBtnHidden:i}=this.config;if(e)return;const{input:o,container:r,clearBtn:s}=this.elements,{color:l,opacity:a,gradient:c}=this.currentValues,d=this.panel&&this.panel.isOpen;let h="";t&&c?(h=O(c),this.emptyColorString=null,d&&!i&&r.classList.add(`${n.container}_clear-btn-visible`)):l&&(h=x(l,a),this.emptyColorString=null,d&&!i&&r.classList.add(`${n.container}_clear-btn-visible`)),!l&&s?s.style.display="none":s&&s.style.removeProperty("display"),r.style.setProperty("--current-color",h),document.activeElement!==o&&(o.value=Dn(this,In,Yn).call(this))}window.TColorPicker=class{constructor(e,t){Ln(this,Fn),Ln(this,Gn),Ln(this,In),Ln(this,An),Ln(this,Wn),Ln(this,Vn),Ln(this,Nn),Ln(this,Un),Ln(this,On),Ln(this,xn),Ln(this,Mn),t="[object Object]"===Object.prototype.toString.call(t)?t:{};const n="[object Object]"===Object.prototype.toString.call(t.gradientHint)?t.gradientHint:{};if(n.EN="string"==typeof n.EN&&n.EN||"",n.RU="string"==typeof n.RU&&n.RU||n.EN||"",!(e instanceof Element||t.inputReplacement instanceof Element))throw new TypeError("TColorPicker input is not an Element");let i="EN";const o=Object.keys(p);o.includes(t.lang)?i=t.lang:o.includes(window.lang)&&(i=window.lang),this.config={letterCase:["lowercase","uppercase"].includes(t.letterCase)?t.letterCase:"uppercase",format:["hex","rgb","hsl"].includes(t.format)?t.format:"hex",isOpacityEnabled:!!t.isOpacityEnabled,isGradientsEnabled:!!t.isGradientsEnabled,swatchesKey:t.swatchesKey||window.projectid||null,theme:["light","dark"].includes(t.theme)?t.theme:"light",panelZIndex:I(t.panelZIndex)?t.panelZIndex:99999,emptyColorKeywords:Array.isArray(t.emptyColorKeywords)?t.emptyColorKeywords:[],noDocumentColors:!!t.noDocumentColors,swatchSize:I(t.swatchSize)&&t.swatchSize>=0?t.swatchSize:35,swatchGap:I(t.swatchGap)&&t.swatchGap>=0?t.swatchGap:13,disablePanelToggleOnInputReplacementClick:!!t.disablePanelToggleOnInputReplacementClick,isNoInputMode:t.inputReplacement instanceof Element,colorChangeDelay:I(t.colorChangeDelay)&&t.colorChangeDelay>=0?t.colorChangeDelay:50,isGradientOpacityOnly:!!t.isGradientOpacityOnly,isTextContrastCheckEnabled:!!t.isTextContrastCheckEnabled,gradientHint:{EN:{gradient_hint:n.EN},RU:{gradient_hint:n.RU}},clearBtnSize:I(t.clearBtnSize)&&t.clearBtnSize>=0?t.clearBtnSize:16,isClearBtnHidden:!!t.isClearBtnHidden,viewboxPadding:G(t.viewboxPadding,5),panelGap:G(t.panelGap,-3),positionPriority:B(t.positionPriority,["right","left","bottom"]),appendTo:t.appendTo instanceof Element?t.appendTo:document.body,lang:i,defaultLibrary:["document_colors","saved_colors","tilda_colors","tilda_gradients"].includes(t.defaultLibrary)?t.defaultLibrary:null,openMatchingColorLibraryOnColorChange:!!t.openMatchingColorLibraryOnColorChange},this.elements={input:t.inputReplacement||e},this.isInited=!1,this.handleInput=this.handleInput.bind(this),this.openPanel=this.openPanel.bind(this),this.handleInputBlur=this.handleInputBlur.bind(this),this.handleInputReplacementClick=this.handleInputReplacementClick.bind(this),this.handleInputKeydown=this.handleInputKeydown.bind(this),this.currentValues={color:null,opacity:null,gradient:null},this.emptyColorString=null,this.colorChangeTrigger=g(),this.colorUpdateTrigger=g(),this.panelToggleTrigger=g(),this.colorChangeTrigger.on(Dn(this,Gn,Jn).bind(this)),this.colorUpdateTrigger.on(Dn(this,Fn,Zn).bind(this)),this.panelToggleTrigger.on(Dn(this,An,qn).bind(this)),this.dispatchColorChangeEvent=f(this.dispatchColorChangeEvent.bind(this),this.config.colorChangeDelay)}init(){if(this.isInited)return;this.isInited=!0;const{isNoInputMode:e,theme:t,clearBtnSize:i,swatchSize:o,swatchGap:r,lang:s}=this.config,{input:l}=this.elements;if(e)l.classList.add(n.container),this.elements.container=l;else{l.classList.add(n.input),l.style.paddingLeft=`${o+r}px`,l.setAttribute("inputmode","none"),l.setAttribute("autocomplete","off");const e=u`
				<div
					className=${n.container}
					onMouseenter=${Dn(this,Vn,Hn).bind(this)}
					onMouseleave=${Dn(this,Wn,Xn).bind(this)}
					style=${`--padding-right:${i+4}px;`}
				>
					<div
						className=${n.swatch}
						style=${`width:${o}px;height:${o}px;`}
						onClick=${Dn(this,Nn,Kn).bind(this)}
						bindTo=${[this.elements,"swatch"]}
					></div>
					${l.disabled?"":u`
								<button
									className=${n.clearBtn}
									type="button"
									style=${`width:${i}px;height:${i}px;`}
									onClick=${Dn(this,Un,zn).bind(this)}
									tooltip=${y("clear",s)}
									bindTo=${[this.elements,"clearBtn"]}
								></button>
							`}
				</div>
			`;l.after(e),e.prepend(l),"dark"===t&&e.classList.add(n.containerThemeDark),this.elements.container=e,Dn(this,On,Rn).call(this,l.value,!0)}Dn(this,xn,jn).call(this)}destroy(){if(!this.isInited)return;const{isNoInputMode:e}=this.config,{input:t,container:i}=this.elements;e?(t.removeEventListener("click",this.handleInputReplacementClick),t.classList.remove(n.container)):(i.insertAdjacentElement("beforebegin",t),i.remove(),t.removeEventListener("input",this.handleInput),t.removeEventListener("focus",this.openPanel),t.removeEventListener("blur",this.handleInputBlur),t.removeEventListener("keydown",this.handleInputKeydown),t.style.removeProperty("padding-left"),t.removeAttribute("inputmode"),t.removeAttribute("autocomplete"),t.classList.remove(n.input)),this.panel&&this.panel.close(),this.isInited=!1,this.currentValues.color=null,this.currentValues.opacity=null,this.currentValues.gradient=null}handleInputBlur(){const{input:e}=this.elements;e.value=Dn(this,In,Yn).call(this)}handleInput(){const{value:e}=this.elements.input;Dn(this,On,Rn).call(this,e)}handleInputKeydown(e){const{key:t}=e;if("Enter"!==t)return;const{input:n}=this.elements;n.value=Dn(this,In,Yn).call(this),this.closePanel()}handleInputReplacementClick(){this.panel&&this.panel.isOpen?this.closePanel():this.openPanel()}openPanel(){this.panel&&this.panel.isOpen||(this.panel||(this.panel=Dn(this,Mn,Bn).call(this)),this.panel.open())}closePanel(){this.panel&&!this.panel.isOpen||!this.panel||this.panel.close()}dispatchColorChangeEvent(e){const t=this.currentValues.color,n=this.currentValues.opacity,i=this.currentValues.gradient,{input:o}=this.elements,r=new Sn(t,n,i,e);o.dispatchEvent(r)}get panelElement(){return this.panel&&this.panel.element||null}get panelState(){return this.panel&&this.panel.isOpen||!1}get color(){return this.currentValues.color}get opacity(){return this.currentValues.opacity}get gradient(){const e=JSON.parse(JSON.stringify(this.currentValues.gradient));return e&&("radial"===e.type&&"angle"in e&&delete e.angle,e.stops.forEach((e=>{null===e.opacity&&(e.opacity=1),"active"in e&&delete e.active}))),e}set color(e){if(!this.isInited)return;const{emptyColorKeywords:t,isOpacityEnabled:n,isGradientOpacityOnly:i}=this.config,o=t.find((t=>t===e)),{currentValues:r}=this;if(!e||o)U(r,null,null,!1),this.emptyColorString=o||null;else{const t=$(e);let o=4===t.length?t.pop():null;o=n&&!i?o:null,U(r,t,o,!1),this.emptyColorString=null}this.colorUpdateTrigger.trigger()}set opacity(e){if(!this.isInited)return;const{currentValues:t}=this,{isOpacityEnabled:n,isGradientOpacityOnly:i}=this.config;let o=I(e)&&e<=1&&e>=0?e:t.opacity;o=n&&!i?o:null,U(t,t.color,o,!1),this.colorUpdateTrigger.trigger()}set gradient(e){const{isOpacityEnabled:t,isGradientsEnabled:n}=this.config;if(!this.isInited||!n)return;const{currentValues:i}=this;e&&Array.isArray(e.stops)&&e.stops.length?(t||e.stops.forEach((e=>e.opacity=null)),i.gradient=e,i.color=e.stops[0].color,i.opacity=e.stops[0].opacity):i.gradient=null,this.colorUpdateTrigger.trigger()}set theme(e){this.isInited&&["light","dark"].includes(e)&&(this.elements.container.classList.toggle(n.containerThemeDark,"dark"===e),this.panel&&(this.panel.theme=e),this.config.theme=e)}set panelGap(e){this.config.panelGap=G(e,-3),this.panel&&(this.panel.config.panelGap=this.config.panelGap)}set isClearBtnHidden(e){this.config.isClearBtnHidden=e}static parseColor(e,t){return $(e,t)}static parseGradient(e,t){return b(e,t)}static hexToRGB(e){return w(e)}static hexToHSL(e){return _(e)}static hslToRGB(e){return T(e)}static hslToRGBA(e){return C(e)}static rgbToHEX(e){return E(e)}static hslToHEX(e){return k(e)}static rgbToHSL(e){return P(e)}static hsvToHSL(e){return S(e)}static hslToHSV(e){return L(e)}static calcRelativeLuminance(e){return M(e)}}})();